top_metals <- ores %>%
group_by(commod1) %>%
count()
View(top_metals)
ores<- read.csv("mineral-ores.csv")
ores <- ores %>%
filter(country == "United States")
ores <- ores %>%
filter(com_type == "M")
ores <-ores %>%
mutate(commod1 = strsplit(as.character(commod1),",")) %>%
unnest(commod1)
ores <- ores %>%
mutate(state = strsplit(as.character(state),",")) %>%
unnest(state)
ores <- ores %>%
mutate(state = str_trim(state))
ores <- ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron")
by_province <- ores %>%
group_by(state,commod1) %>%
count()
state_max <- by_province %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state")
state_max <- state_max[,1:4]
state_max %>%
group_by(state)
View(state_max)
View(state_max)
by_province <- ores %>%
group_by(state,commod1) %>%
count()
state_max <- by_province %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state", all.y = TRUE)
state_max <- state_max[,1:4]
View(state_max)
View(state_max)
View(state_max)
ores<- read.csv("mineral-ores.csv")
ores <- ores %>%
filter(country == "United States")
ores <- ores %>%
filter(com_type == "M")
ores <-ores %>%
mutate(commod1 = strsplit(as.character(commod1),",")) %>%
unnest(commod1)
ores <- ores %>%
mutate(state = strsplit(as.character(state),",")) %>%
unnest(state)
ores <- ores %>%
mutate(state = str_trim(state))
ores_chloropleth <- ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron")
View(ores_chloropleth)
ores_chloropleth <- ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron")
ores_chloropleth %>%
group_by(state,commod1) %>%
count()
ores_chloropleth <- ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron")
group_by(state,commod1) %>%
count()
ores_chloropleth <- ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_by(state,commod1) %>%
count()
View(ores_chloropleth)
ores<- read.csv("mineral-ores.csv")
ores <- ores %>%
filter(country == "United States")
ores <- ores %>%
filter(com_type == "M")
ores <-ores %>%
mutate(commod1 = strsplit(as.character(commod1),",")) %>%
unnest(commod1)
ores <- ores %>%
mutate(state = strsplit(as.character(state),",")) %>%
unnest(state)
ores <- ores %>%
mutate(state = str_trim(state))
ores_chloropleth <- ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_by(state,commod1) %>%
count()
colnames(ores_chloropleth) <- C("state" , "Metal", "Number of Deposits")
View(ores_chloropleth)
View(ores_chloropleth)
ores_chloropleth <- ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_by(state,commod1) %>%
count()
colnames(ores_chloropleth) <- c("state" , "Metal", "Number of Deposits")
write.csv(ores_chloropleth,"ores_chloropleth.csv")
top_ores_us <- ores %>%
group_by(commod1) %>%
count()
View(top_ores_us)
top_ores_us <- ores %>%
group_by(commod1) %>%
count()
top_ores_us[1:10,]
top_ores_us <- ores %>%
group_by(commod1) %>%
count()
colnames(top_ores_us) <- c("Metal", "Number Of Deposits")
top_ores_us[1:10,]
top_ores_us <- ores %>%
group_by(commod1) %>%
count() %>%
order_by(n)
top_ores_us <- ores %>%
group_by(commod1) %>%
count()
colnames(top_ores_us) <- c("Metal", "Number Of Deposits")
top_ores_us[1:10,]
top_ores_us <- ores %>%
group_by(commod1) %>%
count() %>%
arrange(desc(n))
colnames(top_ores_us) <- c("Metal", "Number Of Deposits")
top_ores_us[1:10,]
top_ores_us <- ores %>%
group_by(commod1) %>%
count() %>%
arrange(desc(n))
colnames(top_ores_us) <- c("Metal", "Number Of Deposits")
write.csv(top_ores_us[1:10,],"top_ores_us.csv")
state_id <- read.csv("state_id.csv")
by_province <- ores %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_by(state,commod1) %>%
count()
state_max <- by_province %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state", all.y = TRUE)
state_max <- state_max[,1:4]
View(by_province)
View(by_province)
by_province <- ores %>%
group_by(state,commod1) %>%
count()
state_max <- by_province %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state", all.y = TRUE)
state_max <- state_max[,1:4]
View(by_province)
by_province <- ores %>%
group_by(state,commod1) %>%
count() %>%
arrange(desc(n)) %>%
slice(1:10)
state_max <- by_province %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state", all.y = TRUE)
state_max <- state_max[,1:4]
View(by_province)
by_province <- ores %>%
group_by(state,commod1) %>%
count() %>%
top_n(10,n)
state_max <- by_province %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state", all.y = TRUE)
state_max <- state_max[,1:4]
by_province <- ores %>%
group_by(state,commod1) %>%
count() %>%
top_n(10,n)
state_max <- by_province %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state", all.y = TRUE)
state_max <- state_max[,1:4]
by_province <- ores %>%
group_by(state,commod1) %>%
count() %>%
top_n(5,n)
state_max <- by_province %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state", all.y = TRUE)
state_max <- state_max[,1:4]
by_province <- ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_by(state,commod1) %>%
count()
state_max <- by_province %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state", all.y = TRUE)
state_max <- state_max[,1:4]
View(by_province)
by_province <- ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_by(state,commod1) %>%
count()
state_max <- by_province %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state", all.y = TRUE)
state_max <- state_max[,1:4]
View(state_max)
by_province <- ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_by(state,commod1) %>%
count()
state_max <- by_province %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state", all.y = TRUE)
state_max <- state_max[,1:4]
by_state <- ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_by(state,commod1) %>%
count()
state_max <- by_state %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state", all.y = TRUE)
state_max <- state_max[,1:4]
write.csv(by_state,"state_bar.csv")
write.csv(state_max,"top_metal.csv")
View(state_max)
View(by_province)
View(by_province)
View(ores_chloropleth)
ores<- read.csv("mineral-ores.csv")
ores <- ores %>%
filter(country == "United States")
ores <- ores %>%
filter(com_type == "M")
ores <-ores %>%
mutate(commod1 = strsplit(as.character(commod1),",")) %>%
unnest(commod1)
ores <- ores %>%
mutate(state = strsplit(as.character(state),",")) %>%
unnest(state)
ores <- ores %>%
mutate(state = str_trim(state))
top_ores_us <- ores %>%
group_by(commod1) %>%
count() %>%
arrange(desc(n))
colnames(top_ores_us) <- c("Metal", "Number Of Deposits")
write.csv(top_ores_us[1:10,],"top_ores_us.csv")
View(top_ores_us)
state_id <- read.csv("state_id.csv")
ores_state <- ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_by(state,commod1) %>%
count()  %>%
merge(state_id,by = "state", all.y = TRUE)
View(ores_state)
View(ores_state)
ores_state <- ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_by(state,commod1) %>%
count()  %>%
merge(state_id,by = "state", all.y = TRUE)
ores_state[,c(1,2,3,4)]
ores_state <- ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_by(state,commod1) %>%
count()  %>%
merge(state_id,by = "state", all.y = TRUE)
ores_state <- ores_state[,c(1,2,3,4)]
colnames(ores_state) <- c("state","Metal","Number Of Deposits","id")
ores_state <- ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_by(state,commod1) %>%
count()  %>%
merge(state_id,by = "state", all.y = TRUE)
ores_state <- ores_state[,c(1,2,3,4)]
colnames(ores_state) <- c("state","Metal","Number Of Deposits","id")
write.csv(ores_state,"topdeposits_bystate.csv")
state_group <- ores %>%
group_by(state,commod1) %>%
count()
state_max <- state_group %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state", all.y = TRUE)
state_max <- state_max[,1:4]
write.csv(state_max,"top_metal.csv")
View(state_max)
View(state_max)
state_group <- ores %>%
group_by(state,commod1) %>%
count()
state_max <- state_group %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state", all.y = TRUE)
state_max <- state_max[,1:4]
colnames(state_max) <- c("state","Metal","Number Of Deposits","id")
write.csv(state_max,"top_metal.csv")
View(state_max)
write.csv(ores[,c(1,2,3,6,7,9,16)],"ores_short.csv")
dir.create(temp <- tempfile())
ores %>%
group_by(state) %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_walk(~ write.csv(.x, paste0("state_deposits/",.y$state, ".csv")))
list.files(temp, pattern = "csv$")
ores<- read.csv("mineral-ores.csv")
ores <- ores %>%
filter(country == "United States")
ores <- ores %>%
filter(com_type == "M")
ores <-ores %>%
mutate(commod1 = strsplit(as.character(commod1),",")) %>%
unnest(commod1)
ores <- ores %>%
mutate(state = strsplit(as.character(state),",")) %>%
unnest(state)
ores <- ores %>%
mutate(state = str_trim(state))
top_ores_us <- ores %>%
group_by(commod1) %>%
count() %>%
arrange(desc(n))
colnames(top_ores_us) <- c("Metal", "Number Of Deposits")
write.csv(top_ores_us[1:10,],"top_ores_us.csv")
state_id <- read.csv("state_id.csv")
ores_state <- ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_by(state,commod1) %>%
count()  %>%
merge(state_id,by = "state", all.y = TRUE)
ores_state <- ores_state[,c(1,2,3,4)]
colnames(ores_state) <- c("state","Metal","Number Of Deposits","id")
write.csv(ores_state,"topdeposits_bystate.csv")
state_group <- ores %>%
group_by(state,commod1) %>%
count()
state_max <- state_group %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state", all.y = TRUE)
state_max <- state_max[,1:4]
colnames(state_max) <- c("state","Metal","Number Of Deposits","id")
write.csv(state_max,"top_metal.csv")
write.csv(ores[,c(1,2,3,6,7,9,16)],"ores_short.csv")
dir.create(temp <- tempfile())
ores %>%
group_by(state) %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_walk(~ write.csv(.x, paste0("state_deposits/",.y$state, ".csv")))
list.files(temp, pattern = "csv$")
View(state_max)
View(top_ores_us)
View(state_max)
state_group <- ores %>%
group_by(state,commod1) %>%
count()
state_max <- state_group %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state", all.x = TRUE)
state_max <- state_max[,1:4]
colnames(state_max) <- c("state","Metal","Number Of Deposits","id")
write.csv(state_max,"top_metal.csv")
View(state_max)
state_group <- ores %>%
group_by(state,commod1) %>%
count()
state_max <- state_group %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state", all.y = TRUE)
state_max <- state_max[,1:4]
colnames(state_max) <- c("state","Metal","Number Of Deposits","id")
write.csv(state_max,"top_metal.csv")
View(state_id)
View(state_max)
View(state_id)
ores<- read.csv("mineral-ores.csv")
ores <- ores %>%
filter(country == "United States")
ores <- ores %>%
filter(com_type == "M")
ores <-ores %>%
mutate(commod1 = strsplit(as.character(commod1),",")) %>%
unnest(commod1)
ores <- ores %>%
mutate(state = strsplit(as.character(state),",")) %>%
unnest(state)
ores <- ores %>%
mutate(state = str_trim(state)) %>%
mutate(commod1 = str_strim(commod1))
ores<- read.csv("mineral-ores.csv")
ores <- ores %>%
filter(country == "United States")
ores <- ores %>%
filter(com_type == "M")
ores <-ores %>%
mutate(commod1 = strsplit(as.character(commod1),",")) %>%
unnest(commod1)
ores <- ores %>%
mutate(state = strsplit(as.character(state),",")) %>%
unnest(state)
ores <- ores %>%
mutate(state = str_trim(state)) %>%
mutate(commod1 = str_trim(commod1))
top_ores_us <- ores %>%
group_by(commod1) %>%
count() %>%
arrange(desc(n))
colnames(top_ores_us) <- c("Metal", "Number Of Deposits")
write.csv(top_ores_us[1:10,],"top_ores_us.csv")
state_id <- read.csv("state_id.csv")
ores_state <- ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_by(state,commod1) %>%
count()  %>%
merge(state_id,by = "state", all.y = TRUE)
ores_state <- ores_state[,c(1,2,3,4)]
colnames(ores_state) <- c("state","Metal","Number Of Deposits","id")
write.csv(ores_state,"topdeposits_bystate.csv")
state_group <- ores %>%
group_by(state,commod1) %>%
count()
state_max <- state_group %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state", all.y = TRUE)
state_max <- state_max[,1:4]
colnames(state_max) <- c("state","Metal","Number Of Deposits","id")
write.csv(state_max,"top_metal.csv")
state_group <- ores %>%
group_by(state,commod1) %>%
count()
state_max <- state_group %>%
group_by(state)%>%
filter(n == max(n))
state_max <- merge(state_max,state_id,by = "state", all.y = TRUE)
state_max <- state_max[,1:4]
colnames(state_max) <- c("state","Metal","Number Of Deposits","id")
write.csv(state_max,"top_metal.csv")
write.csv(ores[,c(1,2,3,6,7,9,16)],"ores_short.csv")
dir.create(temp <- tempfile())
ores %>%
group_by(state) %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_walk(~ write.csv(.x, paste0("state_deposits/",.y$state, ".csv")))
list.files(temp, pattern = "csv$")
View(top_ores_us)
top_ores_us <- ores %>%
group_by(commod1) %>%
count() %>%
arrange(desc(n))
colnames(top_ores_us) <- c("Metal", "Number Of Deposits")
write.csv(top_ores_us[1:10,],"top_ores_us.csv")
View(ores)
dir.create(temp <- tempfile())
ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_by(commod1)
dir.create(temp <- tempfile())
ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_by(commod1) %>%
count()
dir.create(temp <- tempfile())
ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_walk(~ write.csv(.x, paste0("metal_group/",.y$commod1, ".csv")))
dir.create(temp <- tempfile())
ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_walk(~ write.csv(.x, paste0("metal_groups/",.y$commod1, ".csv")))
list.files(temp, pattern = "csv$")
dir.create(temp <- tempfile())
ores %>%
mutate(commod1 = str_trim(commod1)) %>%
filter(commod1 == "Gold" |commod1 == "Silver" |commod1 =="Copper" |commod1 == "Lead" |commod1 == "Iron") %>%
group_by(commod1) %>%
group_walk(~ write.csv(.x, paste0("metal_groups/",.y$commod1, ".csv")))
list.files(temp, pattern = "csv$")
